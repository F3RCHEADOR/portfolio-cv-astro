---
import { getCollection } from "astro:content";
import BlogPost from "@/layouts/BlogPost.astro";
import Tailwind from "@/icons/Tailwind.astro";
import React from "@/icons/React.astro";
import AstroIcon from "@/icons/Astro.astro";
import Node from "@/icons/Node.astro";
import Mongo from "@/icons/Mongo.astro";
import Vite from "@/icons/Vite.astro";
import IconsUtils from "@/components/IconsUtils.astro";

const projects = (await getCollection("project")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BlogPost>
  <section>
    <div class="ml-48 relative h-24">
      <img
        src="proyecto.png"
        alt="#"
        class="size-28 absolute top-2 right-1/2"
      />
      <h1
        class="absolute bottom-0 right-1/2 transform -translate-x-1/2 text-3xl font-bold italic dark:text-headingg-main-dark"
      >
        Proyect<span class="text-white">os</span>
      </h1>
    </div>

    <ul
      class="max-w-screen-xl grid md:grid-cols-1 lg:grid-cols-2 mx-auto gap-y-10 gap-x-8 p-2 m-1 my-6"
    >
      {
        projects.map((project) => (
          <li
            class="grid grid-cols-2 gap-x-4 shadow-md px-2.5 py-2 rounded-lg dark:shadow-gray-500 "
            transition:name={`${project.id}`}
          >
            <h3 class="flex items-center justify-center h-10 col-span-2 text-center font-semibold text-xl bg-blue-50 transform transition-all dark:bg-gray-800 text-heading-main-light dark:text-headingg-main-dark">
              {project.data.title}
            </h3>
            <p class="font-medium text-base p-1 m-0.5 mt-8 text-paragraph-light dark:text-paragraph-dark text-pretty tracking-wide hover:font-semibold">
              {project.data.description}
            </p>
            <div>
              <img
                src={`${project.data.heroImage}`}
                alt="#"
                class="w-full h-48 mt-4 rounded-xl hover:scale-105 transform transition-all"
              />
            </div>
            <ul class="col-span-2 mb-2.5 flex flex-row items-center justify-center space-x-2 md:space-x-4 border-b-2 border-dashed border-border-light">
              {project.data.utils.map((tech) => (
                <li class=" px-2 py-0.5 rounded-xl text-base cursor-pointer group duration-75 mb-2">
                  {/* Condicional para renderizar el componente correcto */}
                  {tech === "Tailwind" && (
                    <IconsUtils utils="Tailwind">
                      <Tailwind />
                    </IconsUtils>
                  )}
                  {tech === "React" && (
                    <IconsUtils utils="React">
                      <React />
                    </IconsUtils>
                  )}
                  {tech === "Astro" && (
                    <IconsUtils utils="Astro">
                      <AstroIcon />
                    </IconsUtils>
                  )}
                  {tech === "Mongo" && (
                    <IconsUtils utils="Mongo">
                      <Mongo />
                    </IconsUtils>
                  )}
                  {tech === "Node" && (
                    <IconsUtils utils="Node">
                      <Node />
                    </IconsUtils>
                  )}
                  {tech === "Vite" && (
                    <IconsUtils utils="Vite">
                      <Vite />
                    </IconsUtils>
                  )}
                  {/* Si no hay un ícono, mostrar el nombre de la tecnología */}
                  {![
                    "Tailwind",
                    "React",
                    "Astro",
                    "Mongo",
                    "Node",
                    "Vite",
                  ].includes(tech) && <span>{tech}</span>}
                </li>
              ))}
            </ul>
            <a
              href={`/project/${project.id}`}
              class="flex justify-center mx-auto h-12 w-16 mb-2.5 rounded-md items-center bg-button-main-light dark:bg-button-main-dark group hover:scale-y-105 transition-all "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-10 bg-opacity-80 text-main-light p-1 rounded-xl gropu:hover:scale-110 hover:scale-125 transition-all"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
                />
              </svg>
            </a>
            <a
              href={`/project/${project.id}`}
              class="flex justify-center mx-auto h-12 w-16 rounded-md items-center bg-button-main-light dark:bg-button-main-dark group hover:scale-y-105 transition-all "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-10 bg-opacity-80 text-main-light p-1 rounded-xl gropu:hover:scale-110 hover:scale-125 transition-all"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
                />
              </svg>
            </a>
          </li>
        ))
      }
      
    </ul>
  </section>
</BlogPost>
